<!--pages/circle/activity/index.wxml-->
<view style="display:flex;flex-direction:column">
	<view class="head">
		<image src="{{circle.groupBanner}}" class="banner"></image>
		<view class="circle-content">
			<view class="circle-name">{{circle.groupName}}</view>
			<view class="circle-info">
				<view class="circle-count">粉丝 {{circle.fansCount}} 内容 {{circle.contentCount}}</view>
				<view class="follow" bindtap="followCircle">{{circle.isFollowed?'已关注':'关注'}}</view>
				<image src="/images/share-white.png"></image>
			</view>
		</view>
	</view>
	<view class="circle-desc">{{circleDesc}}<text bindtap="expand" wx:if="{{showExpand}}">展开</text></view>
</view>

<view class="activities" wx:for="{{activities}}" data-index="{{index}}" bindtap="goDetail" wx:if='{{isActivityCircle}}'>
	<image src="{{item.activityBanner}}"></image>
	<view class="activity-content">
		<view class="activity-title">{{item.activityTitle}}</view>
		<view class="activity-addr">{{item.activityArea}}</view>
		<view class="activity-price">{{item.activityIsFree === 0 ? '免费': item.activityCost+'元'}}</view>
		<view class="apply">
			<view class="apply-btn" wx:if="{{item.activityStatus==='活动报名中'}}">立即报名</view>
			<view class="activity-status" style="color:{{item.activityStatus==='活动已下线'||item.activityStatus==='活动已结束'?'rgba(162,162,162,1)':'rgba(66,188,86,1)'}}">{{item.activityStatus}}</view>
		</view>
	</view>
</view>

<view wx:if='{{!isActivityCircle}}' class="post-container" wx:for='{{posts}}'>
	<view class="post-head">
		<image src="{{item.portrait}}" class="avatar"></image>
		<view class="nick-time">
			<view>{{item.nickName}}</view>
			<view class="post-time">{{item.createDate}}</view>
		</view>
		<view wx:if="{{item.userId !== userId}}" class="post-follow" bindtap="switchFollow" data-index="{{index}}">{{item.isFollowed?'已关注':'关注'}}</view>
	</view>

	<view class="post-content">{{item.postContent}}</view>
	<view class="show-all" wx:if='{{!item.showAll}}' bindtap="showAll" data-index="{{index}}">显示全文</view>

	<view class="post-img">
		<image wx:for-item="imgItem" src="{{prefix + imgItem.imgUrl}}" wx:for="{{item.groupPostImgList}}" class="img-item" style="max-width:{{item.groupPostImgList.length>2?'30%':'100%'}}"></image>
	</view>

	<view class="options">
		<view class="like" bindtap="switchLike" data-index="{{index}}">
			<image src="{{item.isLiked ? '/images/like_check.png' : '/images/like.png'}}"></image>{{item.likeAmount ? item.likeAmount : ''}}
		</view>
		<image src="/images/share-2.png"></image>
	</view>

	<view class="add-circle" bindtap="joinCircle">发帖</view>
</view>